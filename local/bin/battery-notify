#!/bin/sh

bat_dirs='BAT*'
[ -f "$HOME/.config/bat" ] && bat_dirs="$(cat "$HOME/.config/bat")"

capacity="$(
    cat /sys/class/power_supply/$bat_dirs/capacity |
    awk 'BEGIN { sum = 0 }
         { sum += $0 }
         END { print sum / NR }'
)"
status="$(
    cat /sys/class/power_supply/$bat_dirs/status |
    head -n1
)"

notify-send --hint=int:transient:1 \
    --hint=int:value:"$capacity" \
    "Battery: $status"
